# django_跨域

## 一、同源策略

```
1.浏览器的安全策略

2. 只允许当前页面朝当前域下发请求,如果向其他域发请求,请求可以正常发送,数据也可以拿回,但是会被浏览器拦截了
```

## 二、CORS(跨域资源共享)

```python
CORS需要浏览器和服务器同时支持。目前，所有浏览器都支持该功能，IE浏览器不能低于IE10。

整个CORS通信过程，都是浏览器自动完成，不需要用户参与。对于开发者来说，CORS通信与同源的AJAX通信没有差别，代码完全一样。浏览器一旦发现AJAX请求跨源，就会自动添加一些附加的头信息，有时还会多出一次附加的请求，但用户不会有感觉。

# 因此，实现CORS通信的关键是服务器。只要服务器实现了CORS接口，就可以跨源通信。
```

## 三、CORS的两种请求方式

```python
1、 #简单请求方式：发一次请求

(1) 请求方法是以下三种方法之一：
    HEAD
    GET
    POST
    	
（2）HTTP的头信息不超出以下几种字段：
    Accept
    Accept-Language
    Content-Language
    Last-Event-ID
    Content-Type：只限于三个值application/x-www-form-urlencoded、multipart/form-data、text/plain

2. #非简单请求方式：发两次请求(第一次是OPTIONS预见请求,第二次是真正的请求)不满足上面的任何一个条件都是 
 
```

## 四、在django中解决跨域问题

```python
1. 在被请求的对象中写一个中间件：
    （1）：在APP下面创建一个py文件
    
    （2）：在py文件中写一个中间件(response)
    
        from django.utils.deprecation import MiddlewareMixin
        class MyCorsMiddle(MiddlewareMixin):
            def process_response(self, request, response):
                
                // 1. 允许简单的请求，用逗号往后加，最好不用*
                response['Access-Control-Allow-Origin'] = '*'
                
                // 2. 允许非简单的请求
                if request.method == 'OPTIONS':
                    response['Access-Control-Allow-Headers'] = '*'
                    
                return response
           
       (3):在setting.py 中的最后面添加此中间件：
           'app01.myCors.MyCorsMiddle',
            
```

## 五、补充

```Python
pip3 freeze >list.txt ：导出当前环境安装的所有包
pip3 install -r list.txt 安装文件中所有模块
```





